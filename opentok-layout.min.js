!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.initLayoutContainer=e():t.initLayoutContainer=e()}("undefined"!=typeof self?self:this,function(){return function(t){var e={};function i(o){if(e[o])return e[o].exports;var r=e[o]={i:o,l:!1,exports:{}};return t[o].call(r.exports,r,r.exports,i),r.l=!0,r.exports}return i.m=t,i.c=e,i.d=function(t,e,o){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(i.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)i.d(o,r,function(e){return t[e]}.bind(null,r));return o},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=0)}([function(t,e,i){"use strict";var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};
/*!
 *  opentok-layout-js (http://github.com/aullman/opentok-layout-js)
 *
 *  Automatic layout of video elements (publisher and subscriber) minimising
 *  white-space for the OpenTok on WebRTC API.
 *
 *  @Author: Adam Ullman (http://github.com/aullman)
 *  @Copyright (c) 2014 Adam Ullman
 *  @License: Released under the MIT license (http://opensource.org/licenses/MIT)
 **/function r(t,e,i){if(i)t.style[e]=i;else{if("object"!==(void 0===e?"undefined":o(e))){var n=getComputedStyle(t).getPropertyValue(e);return""===n&&(n=t.style[e]),n}Object.keys(e).forEach(function(i){r(t,i,e[i])})}}var n=function(t,e,i,o,n,a){var f={left:e+"px",top:i+"px",width:o+"px",height:n+"px"},d=function(){var e=t.querySelector(".OT_root");if(e){var i=e.style.width;e.style.width=o+"px",e.style.width=i||""}};a&&$?($(t).stop(),$(t).animate(f,a.duration||200,a.easing||"swing",function(){d(),a.complete&&a.complete.call(this)})):(r(t,f),t.classList.contains("ot-layout")||t.classList.add("ot-layout")),d()},a=function(t){if(!t)return.75;var e=t.querySelector("video");return e&&e.videoHeight&&e.videoWidth?e.videoHeight/e.videoWidth:t.videoHeight&&t.videoWidth?t.videoHeight/t.videoWidth:.75},f=function(t,e){var i=r(t,e);return i?parseInt(i,10):0},d=function(t){var e=function(t){return t.offsetHeight>0?t.offsetHeight+"px":r(t,"height")}(t);return e?parseInt(e,10):0},l=function(t){var e=function(t){return t.offsetWidth>0?t.offsetWidth+"px":r(t,"width")}(t);return e?parseInt(e,10):0},u=function(t,e,i,o,d,l,u,h,g){var c,s=t.length,p=function(t,o){for(var r,n,a,f,d,l,u,h,g=1;g<=s;g++){var c=g,p=Math.ceil(s/c);(h=(u=Math.floor(i/p))/(l=Math.floor(e/c)))>o?u=l*(h=o):h<t&&(l=u/(h=t));var b=l*u*s;(void 0===r||b>r)&&(r=b,f=u,d=l,n=c,a=p)}return{maxArea:r,targetCols:n,targetRows:a,targetHeight:f,targetWidth:d,ratio:f/d}};if(l){var b=a(t.length>0?t[0]:null);c=p(b,b)}else c=p(u,h);for(var y=0,m=0,v=[],x=0;x<t.length;x++){x%c.targetCols==0&&(L={children:[],width:0,height:0},v.push(L));var R=t[x];L.children.push(R);var w=c.targetWidth,M=c.targetHeight;l&&(w=M/a(R)),L.width+=w,L.height=M}var S=0,j=0;for(x=0;x<v.length;x++){(L=v[x]).width>e?(L.height=Math.floor(L.height*(e/L.width)),L.width=e):L.width<e&&(j+=1),S+=L.height}if(S<i&&j>0){var O=i-S;for(S=0,x=0;x<v.length;x++){if((L=v[x]).width<e){var P=O/j;P/L.height>(e-L.width)/L.width&&(P=Math.floor((e-L.width)/L.width*L.height)),L.width+=Math.floor(P/L.height*L.width),L.height+=P,O-=P,j-=1}S+=L.height}}for(m=(i-S)/2,x=0;x<v.length;x++){var L=v[x];y=(e-L.width)/2;for(var T=0;T<L.children.length;T++){R=L.children[T],w=c.targetWidth,M=L.height;l&&(w=Math.floor(M/a(R))),r(R,"position","absolute");var W=w-f(R,"paddingLeft")-f(R,"paddingRight")-f(R,"marginLeft")-f(R,"marginRight")-f(R,"borderLeft")-f(R,"borderRight"),_=M-f(R,"paddingTop")-f(R,"paddingBottom")-f(R,"marginTop")-f(R,"marginBottom")-f(R,"borderTop")-f(R,"borderBottom");n(R,y+o,m+d,W,_,g),y+=w}m+=M}},h=function(t){return"none"!==r(t,"display")},g=function(t,e){if("none"!==r(t,"display")){var i=t.getAttribute("id");i||(i="OT_"+(1e8*Math.random()).toFixed(0),t.setAttribute("id",i));var o,n,g=d(t)-f(t,"borderTop")-f(t,"borderBottom"),c=l(t)-f(t,"borderLeft")-f(t,"borderRight"),s=g/c,p=0,b=0,y=0,m=0,v=Array.prototype.filter.call(t.querySelectorAll("#"+i+">."+e.bigClass),h),x=Array.prototype.filter.call(t.querySelectorAll("#"+i+">*:not(."+e.bigClass+")"),h);if(v.length>0&&x.length>0)s>a(v[0])?(o=c,y=g-(b=n=Math.floor(g*e.bigPercentage))):(n=g,m=c-(p=o=Math.floor(c*e.bigPercentage))),e.bigFirst?(u(v,o,n,0,0,e.bigFixedRatio,e.bigMinRatio,e.bigMaxRatio,e.animate),u(x,c-p,g-b,p,b,e.fixedRatio,e.minRatio,e.maxRatio,e.animate)):(u(x,c-p,g-b,0,0,e.fixedRatio,e.minRatio,e.maxRatio,e.animate),u(v,o,n,m,y,e.bigFixedRatio,e.bigMinRatio,e.bigMaxRatio,e.animate));else v.length>0&&0===x.length?u(v,c,g,0,0,e.bigFixedRatio,e.bigMinRatio,e.bigMaxRatio,e.animate):u(x,c-p,g-b,p,b,e.fixedRatio,e.minRatio,e.maxRatio,e.animate)}};t.exports=function(t,e){return e=function(t,e){var i={};return Object.keys(e).forEach(function(o){t.hasOwnProperty(o)?i[o]=t[o]:i[o]=e[o]}),i}(e||{},{maxRatio:1.5,minRatio:9/16,fixedRatio:!1,animate:!1,bigClass:"OT_big",bigPercentage:.8,bigFixedRatio:!1,bigMaxRatio:1.5,bigMinRatio:9/16,bigFirst:!0}),t="string"==typeof t?document.querySelector(t):t,"complete"===document.readyState?g(t,e):window.addEventListener("load",function(){g(t,e)}),{layout:g.bind(null,t,e)}}}])});
//# sourceMappingURL=opentok-layout.min.js.map