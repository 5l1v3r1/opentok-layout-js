!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.initLayoutContainer=e():t.initLayoutContainer=e()}("undefined"!=typeof self?self:this,function(){return function(t){var e={};function i(o){if(e[o])return e[o].exports;var n=e[o]={i:o,l:!1,exports:{}};return t[o].call(n.exports,n,n.exports,i),n.l=!0,n.exports}return i.m=t,i.c=e,i.d=function(t,e,o){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(i.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)i.d(o,n,function(e){return t[e]}.bind(null,n));return o},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=2)}([function(t,e,i){"use strict";var o=function(t,e,i,o,n){for(var r=void 0,a=void 0,d=void 0,f=void 0,h=void 0,u=void 0,c=void 0,s=void 0,l=1;l<=n;l+=1){var g=l,v=Math.ceil(n/g);(s=(c=Math.floor(o/v))/(u=Math.floor(i/g)))>e?c=u*(s=e):s<t&&(u=c/(s=t));var p=u*c*n;(void 0===r||p>r)&&(r=p,f=c,h=u,a=g,d=v)}return{maxArea:r,targetCols:a,targetRows:d,targetHeight:f,targetWidth:h,ratio:f/h}},n=function(t,e){var i=t.maxRatio,n=t.minRatio,r=t.fixedRatio,a=t.containerWidth,d=t.containerHeight,f=t.offsetLeft,h=void 0===f?0:f,u=t.offsetTop,c=void 0===u?0:u,s=t.alignItems,l=void 0===s?"center":s,g=e.map(function(t){return t.height/t.width}),v=g.length,p=void 0;if(r){var m=g.length>0?g[0]:null;p=o(m,m,a,d,v)}else p=o(n,i,a,d,v);for(var b=0,y=0,w=[],x=void 0,R=[],H=0;H<g.length;H+=1){H%p.targetCols==0&&(x={ratios:[],width:0,height:0},w.push(x));var W=g[H];x.ratios.push(W);var M=p.targetWidth,L=p.targetHeight;r&&(M=L/W),x.width+=M,x.height=L}for(var T=0,S=0,I=0;I<w.length;I+=1)(x=w[I]).width>a?(x.height=Math.floor(x.height*(a/x.width)),x.width=a):x.width<a&&(S+=1),T+=x.height;if(T<d&&S>0){var j=d-T;T=0;for(var O=0;O<w.length;O+=1){if((x=w[O]).width<a){var _=j/S;_/x.height>(a-x.width)/x.width&&(_=Math.floor((a-x.width)/x.width*x.height)),x.width+=Math.floor(_/x.height*x.width),x.height+=_,j-=_,S-=1}T+=x.height}}switch(l){case"start":y=0;break;case"end":y=d-T;break;case"center":default:y=(d-T)/2}for(var A=0;A<w.length;A+=1){x=w[A];var P=void 0;switch(l){case"start":P=0;break;case"end":P=a-x.width;break;case"center":default:P=(a-x.width)/2}b=P;for(var C=void 0,k=0;k<x.ratios.length;k+=1){var E=x.ratios[k],q=p.targetWidth;C=x.height,r?q=Math.floor(C/E):C/q!=p.targetHeight/p.targetWidth&&(q=Math.floor(p.targetWidth/p.targetHeight*C)),R.push({left:b+h,top:y+c,width:q,height:C}),b+=q}y+=C}return R};t.exports=function(t,e){var i=t.maxRatio,o=void 0===i?1.5:i,r=t.minRatio,a=void 0===r?9/16:r,d=t.fixedRatio,f=void 0!==d&&d,h=t.bigPercentage,u=void 0===h?.8:h,c=t.bigFixedRatio,s=void 0!==c&&c,l=t.bigMaxRatio,g=void 0===l?1.5:l,v=t.bigMinRatio,p=void 0===v?9/16:v,m=t.bigFirst,b=void 0===m||m,y=t.containerWidth,w=void 0===y?640:y,x=t.containerHeight,R=void 0===x?480:x,H=t.alignItems,W=void 0===H?"center":H,M=t.bigAlignItems,L=void 0===M?"center":M,T=t.smallAlignItems,S=void 0===T?"center":T,I=R/w,j=0,O=0,_=0,A=0,P=[],C=e.filter(function(t,e){return!!t.big&&(P.push(e),!0)}),k=e.filter(function(t){return!t.big}),E=[],q=[];if(C.length>0&&k.length>0){var B=void 0,N=void 0;I>function(t){return t.height/t.width}(C[0])?(B=w,_=R-(O=N=Math.floor(R*u))):(N=R,A=w-(j=B=Math.floor(w*u))),b?(E=n({containerWidth:B,containerHeight:N,offsetLeft:0,offsetTop:0,fixedRatio:s,minRatio:p,maxRatio:g,alignItems:L},C),q=n({containerWidth:w-j,containerHeight:R-O,offsetLeft:j,offsetTop:O,fixedRatio:f,minRatio:a,maxRatio:o,alignItems:S},k)):(q=n({containerWidth:w-j,containerHeight:R-O,offsetLeft:0,offsetTop:0,fixedRatio:f,minRatio:a,maxRatio:o,alignItems:S},k),E=n({containerWidth:B,containerHeight:N,offsetLeft:A,offsetTop:_,fixedRatio:s,minRatio:p,alignItems:L},C))}else C.length>0&&0===k.length?E=n({containerWidth:w,containerHeight:R,fixedRatio:s,minRatio:p,maxRatio:g,alignItems:L},C):q=n({containerWidth:w-j,containerHeight:R-O,offsetLeft:j,offsetTop:O,fixedRatio:f,minRatio:a,maxRatio:o,alignItems:W},k);var F=[],$=0,V=0;return e.forEach(function(t,e){P.indexOf(e)>-1?(F[e]=E[$],$+=1):(F[e]=q[V],V+=1)}),F}},function(t,e,i){"use strict";var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n=i(0);t.exports=function(t,e){function i(t,n,r){if(r)return t.style[n]=r,NaN;if("object"===(void 0===n?"undefined":o(n)))return Object.keys(n).forEach(function(e){i(t,e,n[e])}),NaN;var a=(e.window||window).getComputedStyle(t).getPropertyValue(n);return""===a&&(a=t.style[n]),a}var r=function(t,e){var o=i(t,e);return o?parseInt(o,10):0},a=e.animate,d=void 0!==a&&a,f=e.bigClass,h=void 0===f?"OT_big":f;if("none"!==i(t,"display")){var u=t.getAttribute("id");u||(u="OT_"+(1e8*Math.random()).toFixed(0),t.setAttribute("id",u)),e.containerHeight=function(t){var e=function(t){return t.offsetHeight>0?t.offsetHeight+"px":i(t,"height")}(t);return e?parseInt(e,10):0}(t)-r(t,"borderTop")-r(t,"borderBottom"),e.containerWidth=function(t){var e=function(t){return t.offsetWidth>0?t.offsetWidth+"px":i(t,"width")}(t);return e?parseInt(e,10):0}(t)-r(t,"borderLeft")-r(t,"borderRight");var c=Array.prototype.filter.call(t.querySelectorAll("#"+u+">*"),function(t){return"none"!==i(t,"display")}),s=c.map(function(t){var e=function(t){if(t){var e=t.querySelector("video");if(e&&e.videoHeight&&e.videoWidth)return{height:e.videoHeight,width:e.videoWidth};if(t.videoHeight&&t.videoWidth)return{height:t.videoHeight,width:t.videoWidth}}return{height:480,width:640}}(t);return e.big=t.classList.contains(h),e});n(e,s).forEach(function(t,e){var o=c[e];i(o,"position","absolute");var n=t.width-r(o,"paddingLeft")-r(o,"paddingRight")-r(o,"marginLeft")-r(o,"marginRight")-r(o,"borderLeft")-r(o,"borderRight"),a=t.height-r(o,"paddingTop")-r(o,"paddingBottom")-r(o,"marginTop")-r(o,"marginBottom")-r(o,"borderTop")-r(o,"borderBottom");!function(t,e,o,n,r,a){var d=this,f={left:e+"px",top:o+"px",width:n+"px",height:r+"px"},h=function(){var e=t.querySelector(".OT_root");if(e){var i=e.style.width;e.style.width=n+"px",e.style.width=i||""}};a&&$?($(t).stop(),$(t).animate(f,a.duration||200,a.easing||"swing",function(){h(),a.complete&&a.complete.call(d)})):(i(t,f),t.classList.contains("ot-layout")||t.classList.add("ot-layout")),h()}(o,t.left,t.top,n,a,d)})}}},function(t,e,i){"use strict";
/*!
 *  opentok-layout-js (http://github.com/aullman/opentok-layout-js)
 *
 *  Automatic layout of video elements (publisher and subscriber) minimising
 *  white-space for the OpenTok on WebRTC API.
 *
 *  @Author: Adam Ullman (http://github.com/aullman)
 *  @Copyright (c) 2014 Adam Ullman
 *  @License: Released under the MIT license (http://opensource.org/licenses/MIT)
 * */var o=i(0),n=i(1);t.exports=function(t,e){return t="string"==typeof t?(e.window||window).document.querySelector(t):t,void 0===(e.window||window).HTMLElement||t instanceof(e.window||window).HTMLElement||e?e||(e={}):e=t,{layout:n.bind(this,t,e),getLayout:o.bind(this,e)}}}])});
//# sourceMappingURL=opentok-layout.min.js.map