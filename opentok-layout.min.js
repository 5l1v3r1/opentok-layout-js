!function(t,i){"object"==typeof exports&&"object"==typeof module?module.exports=i():"function"==typeof define&&define.amd?define([],i):"object"==typeof exports?exports.initLayoutContainer=i():t.initLayoutContainer=i()}("undefined"!=typeof self?self:this,function(){return function(t){var i={};function e(o){if(i[o])return i[o].exports;var n=i[o]={i:o,l:!1,exports:{}};return t[o].call(n.exports,n,n.exports,e),n.l=!0,n.exports}return e.m=t,e.c=i,e.d=function(t,i,o){e.o(t,i)||Object.defineProperty(t,i,{enumerable:!0,get:o})},e.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},e.t=function(t,i){if(1&i&&(t=e(t)),8&i)return t;if(4&i&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(e.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&i&&"string"!=typeof t)for(var n in t)e.d(o,n,function(i){return t[i]}.bind(null,n));return o},e.n=function(t){var i=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(i,"a",i),i},e.o=function(t,i){return Object.prototype.hasOwnProperty.call(t,i)},e.p="",e(e.s=2)}([function(t,i,e){"use strict";var o=function(t,i,e,o,n){for(var r=void 0,a=void 0,f=void 0,d=void 0,h=void 0,u=void 0,c=void 0,l=void 0,g=1;g<=n;g+=1){var s=g,v=Math.ceil(n/s);(l=(c=Math.floor(o/v))/(u=Math.floor(e/s)))>i?c=u*(l=i):l<t&&(u=c/(l=t));var p=u*c*n;(void 0===r||p>r)&&(r=p,d=c,h=u,a=s,f=v)}return{maxArea:r,targetCols:a,targetRows:f,targetHeight:d,targetWidth:h,ratio:d/h}},n=function(t,i){var e=t.maxRatio,n=t.minRatio,r=t.fixedRatio,a=t.containerWidth,f=t.containerHeight,d=t.offsetLeft,h=void 0===d?0:d,u=t.offsetTop,c=void 0===u?0:u,l=i.map(function(t){return t.height/t.width}),g=l.length,s=void 0;if(r){var v=l.length>0?l[0]:null;s=o(v,v,a,f,g)}else s=o(n,e,a,f,g);for(var p=0,y=0,m=[],b=void 0,w=[],x=0;x<l.length;x+=1){x%s.targetCols==0&&(b={ratios:[],width:0,height:0},m.push(b));var R=l[x];b.ratios.push(R);var H=s.targetWidth,W=s.targetHeight;r&&(H=W/R),b.width+=H,b.height=W}for(var M=0,L=0,T=0;T<m.length;T+=1)(b=m[T]).width>a?(b.height=Math.floor(b.height*(a/b.width)),b.width=a):b.width<a&&(L+=1),M+=b.height;if(M<f&&L>0){var S=f-M;M=0;for(var j=0;j<m.length;j+=1){if((b=m[j]).width<a){var O=S/L;O/b.height>(a-b.width)/b.width&&(O=Math.floor((a-b.width)/b.width*b.height)),b.width+=Math.floor(O/b.height*b.width),b.height+=O,S-=O,L-=1}M+=b.height}}y=(f-M)/2;for(var _=0;_<m.length;_+=1){p=(a-(b=m[_]).width)/2;for(var P=void 0,C=0;C<b.ratios.length;C+=1){var A=b.ratios[C],E=s.targetWidth;P=b.height,r?E=Math.floor(P/A):P/E!=s.targetHeight/s.targetWidth&&(E=Math.floor(s.targetWidth/s.targetHeight*P)),w.push({left:p+h,top:y+c,width:E,height:P}),p+=E}y+=P}return w};t.exports=function(t,i){var e=t.maxRatio,o=void 0===e?1.5:e,r=t.minRatio,a=void 0===r?9/16:r,f=t.fixedRatio,d=void 0!==f&&f,h=t.bigPercentage,u=void 0===h?.8:h,c=t.bigFixedRatio,l=void 0!==c&&c,g=t.bigMaxRatio,s=void 0===g?1.5:g,v=t.bigMinRatio,p=void 0===v?9/16:v,y=t.bigFirst,m=void 0===y||y,b=t.containerWidth,w=void 0===b?640:b,x=t.containerHeight,R=void 0===x?480:x,H=R/w,W=0,M=0,L=0,T=0,S=[],j=i.filter(function(t,i){return!!t.big&&(S.push(i),!0)}),O=i.filter(function(t){return!t.big}),_=[],P=[];if(j.length>0&&O.length>0){var C=void 0,A=void 0;H>function(t){return t.height/t.width}(j[0])?(C=w,L=R-(M=A=Math.floor(R*u))):(A=R,T=w-(W=C=Math.floor(w*u))),m?(_=n({containerWidth:C,containerHeight:A,offsetLeft:0,offsetTop:0,fixedRatio:l,minRatio:p,maxRatio:s},j),P=n({containerWidth:w-W,containerHeight:R-M,offsetLeft:W,offsetTop:M,fixedRatio:d,minRatio:a,maxRatio:o},O)):(P=n({containerWidth:w-W,containerHeight:R-M,offsetLeft:0,offsetTop:0,fixedRatio:d,minRatio:a,maxRatio:o},O),_=n({containerWidth:C,containerHeight:A,offsetLeft:T,offsetTop:L,fixedRatio:l,minRatio:p},j))}else j.length>0&&0===O.length?_=n({containerWidth:w,containerHeight:R,fixedRatio:l,minRatio:p,maxRatio:s},j):P=n({containerWidth:w-W,containerHeight:R-M,offsetLeft:W,offsetTop:M,fixedRatio:d,minRatio:a,maxRatio:o},O);var E=[],q=0,B=0;return i.forEach(function(t,i){S.indexOf(i)>-1?(E[i]=_[q],q+=1):(E[i]=P[B],B+=1)}),E}},function(t,i,e){"use strict";var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n=e(0);t.exports=function(t,i){function e(t,n,r){if(r)return t.style[n]=r,NaN;if("object"===(void 0===n?"undefined":o(n)))return Object.keys(n).forEach(function(i){e(t,i,n[i])}),NaN;var a=(i.window||window).getComputedStyle(t).getPropertyValue(n);return""===a&&(a=t.style[n]),a}var r=function(t,i){var o=e(t,i);return o?parseInt(o,10):0},a=i.animate,f=void 0!==a&&a,d=i.bigClass,h=void 0===d?"OT_big":d;if("none"!==e(t,"display")){var u=t.getAttribute("id");u||(u="OT_"+(1e8*Math.random()).toFixed(0),t.setAttribute("id",u)),i.containerHeight=function(t){var i=function(t){return t.offsetHeight>0?t.offsetHeight+"px":e(t,"height")}(t);return i?parseInt(i,10):0}(t)-r(t,"borderTop")-r(t,"borderBottom"),i.containerWidth=function(t){var i=function(t){return t.offsetWidth>0?t.offsetWidth+"px":e(t,"width")}(t);return i?parseInt(i,10):0}(t)-r(t,"borderLeft")-r(t,"borderRight");var c=Array.prototype.filter.call(t.querySelectorAll("#"+u+">*"),function(t){return"none"!==e(t,"display")}),l=c.map(function(t){var i=function(t){if(t){var i=t.querySelector("video");if(i&&i.videoHeight&&i.videoWidth)return{height:i.videoHeight,width:i.videoWidth};if(t.videoHeight&&t.videoWidth)return{height:t.videoHeight,width:t.videoWidth}}return{height:480,width:640}}(t);return i.big=t.classList.contains(h),i});n(i,l).forEach(function(t,i){var o=c[i];e(o,"position","absolute");var n=t.width-r(o,"paddingLeft")-r(o,"paddingRight")-r(o,"marginLeft")-r(o,"marginRight")-r(o,"borderLeft")-r(o,"borderRight"),a=t.height-r(o,"paddingTop")-r(o,"paddingBottom")-r(o,"marginTop")-r(o,"marginBottom")-r(o,"borderTop")-r(o,"borderBottom");!function(t,i,o,n,r,a){var f=this,d={left:i+"px",top:o+"px",width:n+"px",height:r+"px"},h=function(){var i=t.querySelector(".OT_root");if(i){var e=i.style.width;i.style.width=n+"px",i.style.width=e||""}};a&&$?($(t).stop(),$(t).animate(d,a.duration||200,a.easing||"swing",function(){h(),a.complete&&a.complete.call(f)})):(e(t,d),t.classList.contains("ot-layout")||t.classList.add("ot-layout")),h()}(o,t.left,t.top,n,a,f)})}}},function(t,i,e){"use strict";
/*!
 *  opentok-layout-js (http://github.com/aullman/opentok-layout-js)
 *
 *  Automatic layout of video elements (publisher and subscriber) minimising
 *  white-space for the OpenTok on WebRTC API.
 *
 *  @Author: Adam Ullman (http://github.com/aullman)
 *  @Copyright (c) 2014 Adam Ullman
 *  @License: Released under the MIT license (http://opensource.org/licenses/MIT)
 * */var o=e(0),n=e(1);t.exports=function(t,i){return t="string"==typeof t?(i.window||window).document.querySelector(t):t,void 0===(i.window||window).HTMLElement||t instanceof(i.window||window).HTMLElement||i?i||(i={}):i=t,{layout:n.bind(this,t,i),getLayout:o.bind(this,i)}}}])});
//# sourceMappingURL=opentok-layout.min.js.map