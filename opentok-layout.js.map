{"version":3,"sources":["webpack://initLayoutContainer/webpack/universalModuleDefinition","webpack://initLayoutContainer/webpack/bootstrap","webpack://initLayoutContainer/./src/index.js"],"names":["root","factory","exports","module","define","amd","window","installedModules","__webpack_require__","moduleId","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","$","css","el","propertyName","style","currentValue","getComputedStyle","getPropertyValue","keys","forEach","positionElement","elem","x","y","width","height","animate","targetPosition","left","top","fixAspectRatio","sub","querySelector","oldWidth","stop","duration","easing","complete","this","classList","contains","add","getVideoRatio","video","videoHeight","videoWidth","getCSSNumber","prop","cssStr","parseInt","getHeight","heightStr","offsetHeight","getWidth","widthStr","offsetWidth","arrange","children","Width","Height","offsetLeft","offsetTop","fixedRatio","minRatio","maxRatio","dimensions","count","length","getBestDimensions","maxArea","targetCols","targetRows","targetHeight","targetWidth","tWidth","tHeight","tRatio","cols","rows","Math","ceil","floor","area","undefined","ratio","row","push","totalRowHeight","remainingShortRows","remainingHeightDiff","extraHeight","j","actualWidth","actualHeight","filterDisplayNone","element","layout","container","opts","id","getAttribute","random","toFixed","setAttribute","bigWidth","bigHeight","availableRatio","bigOffsetTop","bigOffsetLeft","bigOnes","Array","filter","querySelectorAll","bigClass","smallOnes","bigPercentage","bigFirst","bigFixedRatio","bigMinRatio","bigMaxRatio","initLayoutContainer","custom","defaults","res","document","readyState","addEventListener","jQuery"],"mappings":"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","file":"opentok-layout.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"initLayoutContainer\"] = factory();\n\telse\n\t\troot[\"initLayoutContainer\"] = factory();\n})(window, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n","/*!\n *  opentok-layout-js (http://github.com/aullman/opentok-layout-js)\n *\n *  Automatic layout of video elements (publisher and subscriber) minimising\n *  white-space for the OpenTok on WebRTC API.\n *\n *  @Author: Adam Ullman (http://github.com/aullman)\n *  @Copyright (c) 2014 Adam Ullman\n *  @License: Released under the MIT license (http://opensource.org/licenses/MIT)\n **/\n\n// in CommonJS context, this should be a `require()`d dependency.\n// in browser globals context, ...? (when using bower, there are dependencies that it has handled\n// for you, so these might be safe to assume)\n\n(function($) {\n  function css(el, propertyName, value) {\n    if (value) {\n      // We are setting one css property\n      el.style[propertyName] = value;\n    } else if (typeof propertyName === 'object') {\n      // We are setting several CSS properties at once\n      Object.keys(propertyName).forEach(function(key) {\n        css(el, key, propertyName[key]);\n      });\n    } else {\n      // We are getting the css property\n      var computedStyle = getComputedStyle(el);\n      var currentValue = computedStyle.getPropertyValue(propertyName);\n\n      if (currentValue === '') {\n        currentValue = el.style[propertyName];\n      }\n\n      return currentValue;\n    }\n  }\n\n  function height(el) {\n    if (el.offsetHeight > 0) {\n      return el.offsetHeight + 'px';\n    }\n    return css(el, 'height');\n  }\n\n  function width(el) {\n    if (el.offsetWidth > 0) {\n      return el.offsetWidth + 'px';\n    }\n    return css(el, 'width');\n  }\n\n  function defaults(custom, defaults) {\n    var res = {};\n    Object.keys(defaults).forEach(function(key) {\n      if (custom.hasOwnProperty(key)) {\n        res[key] = custom[key];\n      } else {\n        res[key] = defaults[key];\n      }\n    });\n    return res;\n  }\n\n  var positionElement = function positionElement(elem, x, y, width, height, animate) {\n    var targetPosition = {\n      left: x + 'px',\n      top: y + 'px',\n      width: width + 'px',\n      height: height + 'px'\n    };\n\n    var fixAspectRatio = function() {\n      var sub = elem.querySelector('.OT_root');\n      if (sub) {\n        // If this is the parent of a subscriber or publisher then we need\n        // to force the mutation observer on the publisher or subscriber to\n        // trigger to get it to fix it's layout\n        var oldWidth = sub.style.width;\n        sub.style.width = width + 'px';\n        // sub.style.height = height + 'px';\n        sub.style.width = oldWidth || '';\n      }\n    };\n\n    if (animate && $) {\n      $(elem).stop();\n      $(elem).animate(targetPosition, animate.duration || 200, animate.easing || 'swing',\n        function() {\n          fixAspectRatio();\n          if (animate.complete) animate.complete.call(this);\n        });\n    } else {\n      css(elem, targetPosition);\n      if (!elem.classList.contains('ot-layout')) {\n        elem.classList.add('ot-layout');\n      }\n    }\n    fixAspectRatio();\n  };\n\n  var getVideoRatio = function(elem) {\n    if (!elem) {\n      return 3 / 4;\n    }\n    var video = elem.querySelector('video');\n    if (video && video.videoHeight && video.videoWidth) {\n      return video.videoHeight / video.videoWidth;\n    } else if (elem.videoHeight && elem.videoWidth) {\n      return elem.videoHeight / elem.videoWidth;\n    }\n    return 3 / 4;\n  }\n\n  var getCSSNumber = function(elem, prop) {\n    var cssStr = css(elem, prop);\n    return cssStr ? parseInt(cssStr, 10) : 0;\n  };\n\n  // Really cheap UUID function\n  var cheapUUID = function() {\n    return (Math.random() * 100000000).toFixed(0);\n  };\n\n  var getHeight = function(elem) {\n    var heightStr = height(elem);\n    return heightStr ? parseInt(heightStr, 10) : 0;\n  };\n\n  var getWidth = function(elem) {\n    var widthStr = width(elem);\n    return widthStr ? parseInt(widthStr, 10) : 0;\n  };\n\n  var arrange = function arrange(children, Width, Height, offsetLeft, offsetTop, fixedRatio,\n    minRatio, maxRatio, animate) {\n    var count = children.length,\n      dimensions;\n\n    var getBestDimensions = function getBestDimensions(minRatio, maxRatio) {\n      var maxArea,\n        targetCols,\n        targetRows,\n        targetHeight,\n        targetWidth,\n        tWidth,\n        tHeight,\n        tRatio;\n\n      // Iterate through every possible combination of rows and columns\n      // and see which one has the least amount of whitespace\n      for (var i = 1; i <= count; i++) {\n        var cols = i;\n        var rows = Math.ceil(count / cols);\n\n        // Try taking up the whole height and width\n        tHeight = Math.floor(Height / rows);\n        tWidth = Math.floor(Width / cols);\n\n        tRatio = tHeight / tWidth;\n        if (tRatio > maxRatio) {\n          // We went over decrease the height\n          tRatio = maxRatio;\n          tHeight = tWidth * tRatio;\n        } else if (tRatio < minRatio) {\n          // We went under decrease the width\n          tRatio = minRatio;\n          tWidth = tHeight / tRatio;\n        }\n\n        var area = (tWidth * tHeight) * count;\n\n        // If this width and height takes up the most space then we're going with that\n        if (maxArea === undefined || (area > maxArea)) {\n          maxArea = area;\n          targetHeight = tHeight;\n          targetWidth = tWidth;\n          targetCols = cols;\n          targetRows = rows;\n        }\n      }\n      return {\n        maxArea: maxArea,\n        targetCols: targetCols,\n        targetRows: targetRows,\n        targetHeight: targetHeight,\n        targetWidth: targetWidth,\n        ratio: targetHeight / targetWidth\n      };\n    };\n\n    if (!fixedRatio) {\n      dimensions = getBestDimensions(minRatio, maxRatio);\n    } else {\n      // Use the ratio of the first video element we find to approximate\n      var ratio = getVideoRatio(children.length > 0 ? children[0] : null);\n      dimensions = getBestDimensions(ratio, ratio);\n    }\n\n    // Loop through each stream in the container and place it inside\n    var x = 0,\n      y = 0,\n      rows = [],\n      row;\n    // Iterate through the children and create an array with a new item for each row\n    // and calculate the width of each row so that we know if we go over the size and need\n    // to adjust\n    for (var i = 0; i < children.length; i++) {\n      if (i % dimensions.targetCols === 0) {\n        // This is a new row\n        row = {\n          children: [],\n          width: 0,\n          height: 0\n        };\n        rows.push(row);\n      }\n      var elem = children[i];\n      row.children.push(elem);\n      var targetWidth = dimensions.targetWidth;\n      var targetHeight = dimensions.targetHeight;\n      // If we're using a fixedRatio then we need to set the correct ratio for this element\n      if (fixedRatio) {\n        targetWidth = targetHeight / getVideoRatio(elem);\n      }\n      row.width += targetWidth;\n      row.height = targetHeight;\n    }\n    // Calculate total row height adjusting if we go too wide\n    var totalRowHeight = 0;\n    var remainingShortRows = 0;\n    for (i = 0; i < rows.length; i++) {\n      var row = rows[i];\n      if (row.width > Width) {\n        // Went over on the width, need to adjust the height proportionally\n        row.height = Math.floor(row.height * (Width / row.width));\n        row.width = Width;\n      } else if (row.width < Width) {\n        remainingShortRows += 1;\n      }\n      totalRowHeight += row.height;\n    }\n    if (totalRowHeight < Height && remainingShortRows > 0) {\n      // We can grow some of the rows, we're not taking up the whole height\n      var remainingHeightDiff = Height - totalRowHeight;\n      totalRowHeight = 0;\n      for (i = 0; i < rows.length; i++) {\n        var row = rows[i];\n        if (row.width < Width) {\n          // Evenly distribute the extra height between the short rows\n          var extraHeight = remainingHeightDiff / remainingShortRows;\n          if ((extraHeight / row.height) > ((Width - row.width) / row.width)) {\n            // We can't go that big or we'll go too wide\n            extraHeight = Math.floor(((Width - row.width) / row.width) * row.height);\n          }\n          row.width += Math.floor((extraHeight / row.height) * row.width);\n          row.height += extraHeight;\n          remainingHeightDiff -= extraHeight;\n          remainingShortRows -= 1;\n        }\n        totalRowHeight += row.height;\n      }\n    }\n    // vertical centering\n    y = ((Height - (totalRowHeight)) / 2);\n    // Iterate through each row and place each child\n    for (i = 0; i < rows.length; i++) {\n      var row = rows[i];\n      // center the row\n      var rowMarginLeft = ((Width - row.width) / 2);\n      x = rowMarginLeft;\n      for (var j = 0; j < row.children.length; j++) {\n        var elem = row.children[j];\n\n        var targetWidth = dimensions.targetWidth;\n        var targetHeight = row.height;\n        // If we're using a fixedRatio then we need to set the correct ratio for this element\n        if (fixedRatio) {\n          targetWidth = Math.floor(targetHeight / getVideoRatio(elem));\n        }\n        css(elem, 'position', 'absolute');\n        var actualWidth = targetWidth - getCSSNumber(elem, 'paddingLeft') -\n          getCSSNumber(elem, 'paddingRight') -\n          getCSSNumber(elem, 'marginLeft') -\n          getCSSNumber(elem, 'marginRight') -\n          getCSSNumber(elem, 'borderLeft') -\n          getCSSNumber(elem, 'borderRight');\n\n        var actualHeight = targetHeight - getCSSNumber(elem, 'paddingTop') -\n          getCSSNumber(elem, 'paddingBottom') -\n          getCSSNumber(elem, 'marginTop') -\n          getCSSNumber(elem, 'marginBottom') -\n          getCSSNumber(elem, 'borderTop') -\n          getCSSNumber(elem, 'borderBottom');\n\n        positionElement(elem, x + offsetLeft, y + offsetTop, actualWidth, actualHeight, animate);\n        x += targetWidth;\n      }\n      y += targetHeight;\n    }\n  };\n\n  var filterDisplayNone = function(element) {\n    return css(element, 'display') !== 'none';\n  };\n\n  var layout = function layout(container, opts) {\n    if (css(container, 'display') === 'none') {\n      return;\n    }\n    var id = container.getAttribute('id');\n    if (!id) {\n      id = 'OT_' + cheapUUID();\n      container.setAttribute('id', id);\n    }\n\n    var Height = getHeight(container) -\n      getCSSNumber(container, 'borderTop') -\n      getCSSNumber(container, 'borderBottom'),\n      Width = getWidth(container) -\n      getCSSNumber(container, 'borderLeft') -\n      getCSSNumber(container, 'borderRight'),\n      availableRatio = Height / Width,\n      offsetLeft = 0,\n      offsetTop = 0,\n      bigOffsetTop = 0,\n      bigOffsetLeft = 0,\n      bigOnes = Array.prototype.filter.call(\n        container.querySelectorAll('#' + id + '>.' + opts.bigClass),\n        filterDisplayNone),\n      smallOnes = Array.prototype.filter.call(\n        container.querySelectorAll('#' + id + '>*:not(.' + opts.bigClass + ')'),\n        filterDisplayNone);\n\n    if (bigOnes.length > 0 && smallOnes.length > 0) {\n      var bigWidth, bigHeight;\n\n      if (availableRatio > getVideoRatio(bigOnes[0])) {\n        // We are tall, going to take up the whole width and arrange small\n        // guys at the bottom\n        bigWidth = Width;\n        bigHeight = Math.floor(Height * opts.bigPercentage);\n        offsetTop = bigHeight;\n        bigOffsetTop = Height - offsetTop;\n      } else {\n        // We are wide, going to take up the whole height and arrange the small\n        // guys on the right\n        bigHeight = Height;\n        bigWidth = Math.floor(Width * opts.bigPercentage);\n        offsetLeft = bigWidth;\n        bigOffsetLeft = Width - offsetLeft;\n      }\n      if (opts.bigFirst) {\n        arrange(bigOnes, bigWidth, bigHeight, 0, 0, opts.bigFixedRatio, opts.bigMinRatio,\n          opts.bigMaxRatio, opts.animate);\n        arrange(smallOnes, Width - offsetLeft, Height - offsetTop, offsetLeft, offsetTop,\n          opts.fixedRatio, opts.minRatio, opts.maxRatio, opts.animate);\n      } else {\n        arrange(smallOnes, Width - offsetLeft, Height - offsetTop, 0, 0, opts.fixedRatio,\n          opts.minRatio, opts.maxRatio, opts.animate);\n        arrange(bigOnes, bigWidth, bigHeight, bigOffsetLeft, bigOffsetTop,\n          opts.bigFixedRatio, opts.bigMinRatio, opts.bigMaxRatio, opts.animate);\n      }\n    } else if (bigOnes.length > 0 && smallOnes.length === 0) {\n      // We only have one bigOne just center it\n      arrange(bigOnes, Width, Height, 0, 0, opts.bigFixedRatio, opts.bigMinRatio,\n        opts.bigMaxRatio, opts.animate);\n    } else {\n      arrange(smallOnes, Width - offsetLeft, Height - offsetTop, offsetLeft, offsetTop,\n        opts.fixedRatio, opts.minRatio, opts.maxRatio, opts.animate);\n    }\n  };\n\n  var initLayoutContainer = function(container, opts) {\n    opts = defaults(opts || {}, {\n      maxRatio: 3 / 2,\n      minRatio: 9 / 16,\n      fixedRatio: false,\n      animate: false,\n      bigClass: 'OT_big',\n      bigPercentage: 0.8,\n      bigFixedRatio: false,\n      bigMaxRatio: 3 / 2,\n      bigMinRatio: 9 / 16,\n      bigFirst: true\n    });\n    container = typeof(container) === 'string' ? document.querySelector(container) : container;\n\n    if (document.readyState === 'complete') {\n      layout(container, opts);\n    } else {\n      window.addEventListener('load', function() {\n        layout(container, opts);\n      });\n    }\n\n    return {\n      layout: layout.bind(null, container, opts)\n    };\n  };\n\n  if (typeof module === 'undefined' || typeof module.exports === 'undefined') {\n    window.initLayoutContainer = initLayoutContainer;\n  } else {\n    module.exports.initLayoutContainer = initLayoutContainer;\n  }\n\n})((typeof window !== 'undefined' && window.hasOwnProperty('jQuery')) ? window.jQuery : undefined);\n"],"sourceRoot":""}